(this["webpackJsonptykhe-companion"]=this["webpackJsonptykhe-companion"]||[]).push([[0],{42:function(e,t,n){},44:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(17),r=n.n(c),l=(n(42),n(43),n(19)),o=n(7),d=n(18),s=n(14),u=(n(44),/(^:[1-5]star128:\W*-\W*(.+)\W*-\W*[0-9]{4}$)|(^[1-5](s|star)?[\s-]{1}(.+)[\s-]{1}[0-9]{4}$)/),j=function(e,t){return e.name===t.name?e.tier>t.tier?-1:e.tier>t.tier?1:0:e.name<t.name?-1:1},b=n(9),v=n(36),O=n(24),f=n(37),h=n(2),m=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(""),r=Object(s.a)(c,2),m=r[0],p=r[1],x=Object(a.useState)(0),g=Object(s.a)(x,2),y=g[0],N=g[1],k=Object(a.useState)(""),w=Object(s.a)(k,2),E=w[0],C=w[1],S=Object(a.useState)(null),B=Object(s.a)(S,2),D=B[0],I=B[1],F=Object(a.useState)([]),A=Object(s.a)(F,2),J=A[0],T=A[1],H=Object(a.useState)(!1),L=Object(s.a)(H,2),U=L[0],W=L[1],K=Object(a.useState)(!1),P=Object(s.a)(K,2),R=P[0],M=P[1];Object(a.useEffect)((function(){var e=localStorage.getItem("inv");e&&i(JSON.parse(e))}),[]),Object(a.useEffect)((function(){document.onkeyup=function(e){var t;"Escape"===e.key&&(p(""),C(""),null===(t=document.getElementById(y+""))||void 0===t||t.style.setProperty("text-decoration","none"),N(0))}}),[y]),Object(a.useEffect)((function(){n&&localStorage.setItem("inv",JSON.stringify(n))}),[n]);var $=function(e,t,n){var a=n+"";return!(!e||!t||!n||e>5||e<1||t.length<=0||a.includes(".")||a.includes(",")||4!==a.length||n<1e3)},Y=function(e){C(e.target.value)},q=function(e){var t;"Enter"===e.key&&(null===(t=document.getElementById("new-card-input-submit-button"))||void 0===t||t.click())},z=function(e){var t,n;e.persist();var a=null===(t=e.target)||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.cat;p(a),C("")},G=function(e){var t=0,n=0,a="";if(":"===(null===e||void 0===e?void 0:e[0])){if(!/^:[0-5]star128:/.test(e))return null;t=Number(e[1]);var i=Object(d.a)(e.split("-").map((function(e){return e.trim()}))).filter((function(e){return e.length>0}));n=Number(i[i.length-1]),a=i.slice(1,i.length-1).join(" - ")}else{var c;if(!/^[1-5][^0-9]+/.test(e))return null;var r=[];r=Object(d.a)(e.split("-").map((function(e){return e.trim()}))).filter((function(e){return e.length>0}));t=Number(null===(c=r[0].match(/\d+/g))||void 0===c?void 0:c[0])||0,n=Number(r[r.length-1]),a=r.slice(1,r.length-1).join(" - "),$(t,a,n)||(r=Object(d.a)(e.split(" ").map((function(e){return e.trim()}))).filter((function(e){return e.length>0})),t=Number(e[0]),n=Number(r[r.length-1]),a=r.slice(1,r.length-1).join(" "))}return $(t,a,n)?{tier:t,name:a,uid:n}:null},Q=function(e){var t,a=(E||"").replace(":lock:","").trim();if("JSON"===a)return null===(t=document.getElementById("downloadJSON"))||void 0===t||t.click(),p(""),N(0),C(""),void e.preventDefault();if("CLEAR"===a)return localStorage.clear(),void window.location.reload();if("CREATE CAT"===a)return M(!0),void e.preventDefault();if("DELETE CAT"===a)return I({cat:m,tier:0,name:"",uid:0}),void e.preventDefault();if(u.test(a)){var c=G(a);if(c){if(y){var r,s=n[m].find((function(e){return e.uid===y}));(null===c||void 0===c?void 0:c.name)!==(null===s||void 0===s?void 0:s.name)&&alert("Attention: you input a different card name, the old card will be replaced."),i(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},m,[].concat(Object(d.a)(n[m].filter((function(e){return e.uid!==y}))),[Object(o.a)({},c)]).sort(j)))),null===(r=document.getElementById(y+""))||void 0===r||r.style.removeProperty("text-decoration")}else Object.keys(n).forEach((function(e){if(!!n[e].find((function(e){return e.uid===(null===c||void 0===c?void 0:c.uid)})))throw alert("Duplicate UID, please check your data."),"Duplicate UID, please check your data."})),i(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},m,[].concat(Object(d.a)(n[m]),[Object(o.a)({},c)]).sort(j))));p(""),N(0),C(""),e.preventDefault()}else alert("Non valid input, abort! abort!")}else alert("Non valid input, abort! abort!")},V=function(e){var t,a,i,c;if(e.persist(),"B"!==e.target.tagName){var r=null===(t=e.target)||void 0===t||null===(a=t.dataset)||void 0===a?void 0:a.cat,l=Number(null===(i=e.target)||void 0===i||null===(c=i.dataset)||void 0===c?void 0:c.uid);if(r&&l){var d=n[r].find((function(e){return e.uid===l}));I(Object(o.a)({cat:r},d))}}else e.target.parentElement.click()},X=function(e){var t,n,a,i,c;if(e.persist(),"B"!==e.target.tagName){var r=null===(t=e.target)||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.cat,l=Number(null===(a=e.target)||void 0===a||null===(i=a.dataset)||void 0===i?void 0:i.uid);if(r&&l){var o=document.getElementById(l+"");null===o||void 0===o||o.style.setProperty("text-decoration","line-through"),p(r),N(l),C((null===o||void 0===o||null===(c=o.firstElementChild)||void 0===c?void 0:c.innerHTML)||"")}}else e.target.parentElement.click()};return Object(h.jsxs)("div",{className:"main-container",children:[n?Object.keys(n).sort().map((function(e){return Object(h.jsxs)("div",{className:"cat",children:[Object(h.jsxs)("div",{className:"cat-header",children:[Object(h.jsx)("b",{children:e}),Object(h.jsx)("span",{className:"abs-right-button",title:"Add a new card","data-cat":e,onClick:z,children:"+"})]}),Object(h.jsxs)("div",{className:"cat-body",children:[m===e&&Object(h.jsxs)("div",{id:"new-card-form",children:[Object(h.jsxs)("div",{className:"card-format",children:["?",Object(h.jsxs)("span",{className:"card-format-info",children:["Copy from inv:",Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:":2star128: - Hawkeye (Kate Bishop) - 2333"}),Object(h.jsx)("br",{}),"or manually insert",Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:"2s Hawkeye (Kate Bishop) 2333"})]})]}),Object(h.jsx)("input",{id:"new-card-input-box",className:"new-card-input-box",type:"text",autoFocus:!0,value:E,onChange:Y,onKeyUp:q,placeholder:"2s Hawkeye (Kate Bishop) 2333"}),Object(h.jsx)("input",{type:"button",id:"new-card-input-submit-button",value:"\u2713",onClick:Q})]}),Object(h.jsx)("div",{className:"hide-overflow",children:n[e].map((function(t,i){var c,r;return Object(h.jsxs)(a.Fragment,{children:[(null===(c=n[e])||void 0===c||null===(r=c[i-1])||void 0===r?void 0:r.name)!==t.name&&Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"card-line star"+t.tier,id:t.uid+"",children:[Object(h.jsx)("span",{children:"".concat(t.tier,"s - ").concat(t.name," - ").concat(t.uid)}),Object(h.jsx)("span",{className:"edit-card-button unselectable","data-cat":e,"data-uid":t.uid,onClick:X,children:Object(h.jsx)("b",{children:"\u270e"})}),Object(h.jsx)("span",{className:"delete-card-button unselectable","data-cat":e,"data-uid":t.uid,onClick:V,children:Object(h.jsx)("b",{children:"\xd7"})})]})]},t.uid)}))})]})]},e)})):Object(h.jsxs)("div",{className:"file-input-container",children:[Object(h.jsx)("label",{htmlFor:"initial-inv-input",children:"Hi, please upload inventory text file."}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",name:"initial-inv-input",id:"initial-inv-input",accept:"text/plain",onChange:function(e){var t,n,a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];if(console.log(a),a){var i=new FileReader;i.readAsText(a,"UTF-8"),i.onload=function(e){var t,n,a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.result)||void 0===n?void 0:n.replace(":lock:",""),i={},c="",r=a.split("\n"),l=0,s=[];r.forEach((function(e){if(e.startsWith(":")||/^[0-9]/.test(e)){var t=G(e.trim());if(!c||!t)return l++,void s.push(e);i[c].push(Object(o.a)({},t))}else if(e.length>1){var n=e.trim();n!==c&&(i[n]||(i[n]=[])),c=n}}));var u={};Object(d.a)(Object.keys(i)).forEach((function(e){if(0===i[e].length)return delete i[e],void s.push(e);u[e]=i[e].sort(j)})),localStorage.setItem("inv",JSON.stringify(u)),l>0?(T(s),W(!0)):window.location.reload()},i.onerror=function(e){alert("error")}}}})]}),Object(h.jsx)("a",{id:"downloadJSON",href:"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n)),download:"inv.json",style:{display:"none"},children:"DOWNLOAD JSON"}),D&&Object(h.jsxs)(b.a,{show:!0,backdrop:"static",keyboard:!1,children:[Object(h.jsx)(b.a.Header,{children:"Are you sure?"}),Object(h.jsx)(b.a.Body,{children:Object(h.jsxs)(v.a,{variant:"danger",children:["Are you sure you want to remove this?",Object(h.jsx)("br",{}),Object(h.jsx)("b",{children:D.tier?"".concat(D.tier,"s - ").concat(D.name," - ").concat(D.uid):"Category: ".concat(D.cat)})]})}),Object(h.jsxs)(b.a.Footer,{children:[Object(h.jsx)(O.a,{variant:"secondary",onClick:function(){I(null)},children:"Don't remove"}),Object(h.jsx)(O.a,{variant:"danger",onClick:function(){if(null===D||void 0===D?void 0:D.cat){if(!D.tier&&D.cat){var e=Object(o.a)({},n);return delete e[D.cat],i(e),void I(null)}D.uid&&(i(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},D.cat,Object(d.a)(n[D.cat].filter((function(e){return e.uid!==D.uid})))))),I(null))}},children:"Yes, do it."})]})]}),U&&J.length>0&&Object(h.jsxs)(b.a,{show:!0,backdrop:"static",keyboard:!1,children:[Object(h.jsx)(b.a.Header,{children:"Error encountered"}),Object(h.jsxs)(b.a.Body,{children:[Object(h.jsxs)(v.a,{variant:"danger",children:[J.length," error(s) encountered in these lines:"]}),Object(h.jsx)("div",{className:"import-error-log-container",children:J.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("span",{className:"error-log-index unselectable",children:[t+1,"\xa0"]}),e]})}))})]}),Object(h.jsx)(b.a.Footer,{children:Object(h.jsx)(O.a,{variant:"secondary",onClick:function(){window.location.reload()},children:"OK"})})]}),R&&Object(h.jsxs)(b.a,{show:!0,children:[Object(h.jsx)(b.a.Header,{closeButton:!0,children:"New sub category"}),Object(h.jsx)(b.a.Body,{children:Object(h.jsx)(f.a.Control,{id:"new-subcat-input",placeholder:"Marvel Cinematic Universe",autoFocus:!0})}),Object(h.jsx)(b.a.Footer,{children:Object(h.jsx)(O.a,{variant:"primary",onClick:function(){var e=document.getElementById("new-subcat-input").value;e?(i(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},e,[]))),M(!1),p(""),N(0),C("")):alert("Invalid category name")},children:"ADD"})})]})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(m,{})}),document.getElementById("root")),p()}},[[49,1,2]]]);
//# sourceMappingURL=main.cd1bd9ba.chunk.js.map