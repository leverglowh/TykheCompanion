(this["webpackJsonptykhe-companion"]=this["webpackJsonptykhe-companion"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),c=n(9),r=n.n(c),l=(n(14),n(4)),o=n(3),s=n(2),d=n(6),u=(n(15),function(e,t){return e.name===t.name?e.tier>t.tier?-1:e.tier>t.tier?1:0:e.name<t.name?-1:1}),b=n(0),j=function(){var e=Object(i.useState)(null),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(""),r=Object(d.a)(c,2),j=r[0],v=r[1],f=Object(i.useState)(0),m=Object(d.a)(f,2),O=m[0],p=m[1],h=Object(i.useState)(""),g=Object(d.a)(h,2),x=g[0],y=g[1];Object(i.useEffect)((function(){var e=localStorage.getItem("inv");e&&a(JSON.parse(e))}),[]),Object(i.useEffect)((function(){document.onkeyup=function(e){var t;"Escape"===e.key&&(v(""),y(""),null===(t=document.getElementById(O+""))||void 0===t||t.style.setProperty("text-decoration","none"),p(0))}}),[O]),Object(i.useEffect)((function(){}),[j]),Object(i.useEffect)((function(){n&&localStorage.setItem("inv",JSON.stringify(n))}),[n]);var N=function(e){y(e.target.value)},k=function(e){var t,n;e.persist();var i=null===(t=e.target)||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.cat;v(i),y("")},w=function(e){var t=(x||"").replace(":lock:",""),i=0,c=0,r="";if(":"===(null===t||void 0===t?void 0:t[0])){i=Number(t[1]);var d=Object(s.a)(t.split("-").map((function(e){return e.trim()})));c=Number(d[d.length-1]),r=d.slice(1,d.length-1).join(" - ")}else{var b=[],f="";f="-"===(null===t||void 0===t?void 0:t[3])?"-":" ",b=Object(s.a)(t.split(f).map((function(e){return e.trim()}))),i=Number(t[0]),c=Number(b[b.length-1]),r=b.slice(1,b.length-1).join("-"===f?" - ":f)}if(i&&r&&c){if(O){var m,h=n[j].find((function(e){return e.uid===O}));r!==(null===h||void 0===h?void 0:h.name)&&alert("Attention: you input a different card name, the old card will be replaced."),a(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},j,[].concat(Object(s.a)(n[j].filter((function(e){return e.uid!==O}))),[{tier:i,name:r,uid:c}]).sort(u)))),null===(m=document.getElementById(O+""))||void 0===m||m.style.removeProperty("text-decoration")}else Object.keys(n).forEach((function(e){if(!!n[e].find((function(e){return e.uid===c})))throw alert("Duplicate UID, please check your data."),"Duplicate UID, please check your data."})),a(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},j,[].concat(Object(s.a)(n[j]),[{tier:i,name:r,uid:c}]).sort(u))));v(""),p(0),y(""),e.preventDefault()}else alert("Non valid input, abort abort!")},E=function(e){var t,i,c,r;if(e.persist(),"B"!==e.target.tagName){var d=null===(t=e.target)||void 0===t||null===(i=t.dataset)||void 0===i?void 0:i.cat,u=Number(null===(c=e.target)||void 0===c||null===(r=c.dataset)||void 0===r?void 0:r.uid);d&&u&&a(Object(o.a)(Object(o.a)({},n),{},Object(l.a)({},d,Object(s.a)(n[d].filter((function(e){return e.uid!==u}))))))}else e.target.parentElement.click()},S=function(e){var t,n,i,a,c;if(e.persist(),"B"!==e.target.tagName){var r=null===(t=e.target)||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.cat,l=Number(null===(i=e.target)||void 0===i||null===(a=i.dataset)||void 0===a?void 0:a.uid);if(r&&l){var o=document.getElementById(l+"");null===o||void 0===o||o.style.setProperty("text-decoration","line-through"),v(r),p(l),y((null===o||void 0===o||null===(c=o.firstElementChild)||void 0===c?void 0:c.innerHTML)||"")}}else e.target.parentElement.click()};return Object(b.jsx)("div",{className:"container",children:n?Object.keys(n).map((function(e){return Object(b.jsxs)("div",{className:"cat",children:[Object(b.jsxs)("div",{className:"cat-header",children:[Object(b.jsx)("b",{children:e}),Object(b.jsx)("span",{className:"abs-right-button",title:"Add a new card","data-cat":e,onClick:k,children:"+"})]}),Object(b.jsxs)("div",{className:"cat-body",children:[j===e&&Object(b.jsxs)("div",{id:"new-card-form",children:[Object(b.jsxs)("div",{className:"card-format",children:["?",Object(b.jsxs)("span",{className:"card-format-info",children:["Copy from inv:",Object(b.jsx)("br",{}),Object(b.jsx)("b",{children:":2star128: - Hawkeye (Kate Bishop) - 2333"}),Object(b.jsx)("br",{}),"or manually insert",Object(b.jsx)("br",{}),Object(b.jsx)("b",{children:"2s Hawkeye (Kate Bishop) 2333"})]})]}),Object(b.jsx)("input",{id:"new-card-input-box",className:"new-card-input-box",type:"text",autoFocus:!0,value:x,onChange:N,placeholder:"2s Hawkeye (Kate Bishop) 2333"}),Object(b.jsx)("input",{type:"button",value:"\u2713",onClick:w})]}),Object(b.jsx)("div",{className:"hide-overflow",children:n[e].map((function(t,a){var c,r;return Object(b.jsxs)(i.Fragment,{children:[(null===(c=n[e])||void 0===c||null===(r=c[a-1])||void 0===r?void 0:r.name)!==t.name&&Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"card star"+t.tier,id:t.uid+"",children:[Object(b.jsx)("span",{children:"".concat(t.tier,"s - ").concat(t.name," - ").concat(t.uid)}),Object(b.jsx)("span",{className:"edit-card-button unselectable","data-cat":e,"data-uid":t.uid,onClick:S,children:Object(b.jsx)("b",{children:"\u270e"})}),Object(b.jsx)("span",{className:"delete-card-button unselectable","data-cat":e,"data-uid":t.uid,onClick:E,children:Object(b.jsx)("b",{children:"\xd7"})})]})]},t.uid)}))})]})]},e)})):Object(b.jsxs)("div",{className:"file-input-container",children:[Object(b.jsx)("label",{htmlFor:"initial-inv-input",children:"Hi, please upload inventory text file."}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"file",name:"initial-inv-input",id:"initial-inv-input",accept:"text/plain",onChange:function(e){var t,n,i=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files)||void 0===n?void 0:n[0];if(console.log(i),i){var a=new FileReader;a.readAsText(i,"UTF-8"),a.onload=function(e){var t,n,i=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.result)||void 0===n?void 0:n.replace(":lock:",""),a={},c="";i.split("\n").forEach((function(e){if(e.startsWith(":")){var t=Number(e[1]),n=Object(s.a)(e.split("-").map((function(e){return e.trim()}))),i=Number(n[n.length-1]),r=n.slice(1,n.length-1).join(" - ");if(!c)throw"error, bye";a[c].push({tier:t,name:r,uid:i})}else if(e.length>1){var l=e.trim();l!==c&&(a[l]||(a[l]=[])),c=l}}));var r={};Object(s.a)(Object.keys(a)).sort().forEach((function(e){r[e]=a[e].sort(u)})),localStorage.setItem("inv",JSON.stringify(r)),window.location.reload()},a.onerror=function(e){alert("error")}}}})]})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(j,{})}),document.getElementById("root")),v()}},[[17,1,2]]]);
//# sourceMappingURL=main.858ec9f0.chunk.js.map